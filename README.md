# BBS数据可视化与分析系统

本项目是一个用于处理、分析和可视化BBS论坛数据的系统，包含数据预处理、多维度统计分析和可视化展示功能。

## 项目结构

```
bbs_data/
├── backend/           # 后端Flask API
├── frontend/          # 前端React应用
├── data/              # 数据文件
│   ├── raw/           # 原始数据
│   └── processed/     # 处理后的数据
├── py/                # Python数据处理脚本
└── requirements.txt   # 项目依赖
```

## 功能特性

### 数据可视化大盘

#### 1. 发帖量统计
- 展示形式: 折线图
- 时间维度: 小时、日、周、月
- 小时维度: 展示最近90小时数据
- 日/周/月维度: 最多展示30/20/20个最新数据点

#### 2. 更新量统计
- 展示形式: 3条折线图(分别对应重发、回帖、删回帖)
- 时间维度: 小时、日、周、月
- 小时维度: 展示最近90小时数据
- 日/周/月维度: 最多展示30/20/20个最新数据点

#### 3. 阅读量统计
- 展示形式: 折线图(增量数据)
- 时间维度: 小时、日、周、月
- 小时维度: 展示最近90小时数据
- 日/周/月维度: 最多展示30/20/20个最新数据点

#### 4. 帖子排行榜
- 排序规则: 按重发次数(repost_count)倒序
- 分页: 每页10条，后端分页实现

#### 5. 用户排行榜
- 排序规则: 按重发次数(repost_count)倒序
- 分页: 每页10条，后端分页实现

#### 6. 热门词汇
- 展示形式: 词云
- 数据来源: 帖子标题
- 词汇数量: 大词20个，中词55个，小词225个

### 数据分析功能

#### 分析一：发帖时间分布分析
- **日发帖量统计表**: 按日期和小时段统计发帖数量，包含总计列
- **周发帖量统计表**: 按自然周和小时段汇总发帖数量，包含总计列
- **月发帖量统计表**: 按自然月和小时段汇总发帖数量，包含总计列
- **时段发帖汇总表**: 按小时段视角汇总所有日期的发帖数量，包含总计行

#### 分析二：帖子更新行为分析
- **日更新量统计表**: 按日期、小时段和更新原因（重发、回帖、删回帖）统计更新数量，包含总计列
- **周更新量统计表**: 按自然周、小时段和更新原因汇总更新数量，包含总计列
- **月更新量统计表**: 按自然月、小时段和更新原因汇总更新数量，包含总计列
- **时段更新汇总表**: 按小时段视角汇总所有更新原因数据，包含总计行

#### 分析三：阅读量增长分析
- **日阅读量增量表**: 按日期和小时段统计阅读量增长，包含总计列
- **月阅读量平均增量表**: 按月份和小时段计算平均阅读量增长，包含总计列（平均值）

#### 分析四：帖子活跃度排行榜
- 按重发次数降序排列的帖子活跃度排行
- 包含URL、发帖时间、最近更新时间、标题、发帖天数、作者和各类更新行为次数

#### 分析五：用户活跃度排行榜
- 按重发次数降序排列的用户活跃度排行
- 包含作者和各类更新行为次数

## 技术栈

### 前端
- React 18
- Ant Design UI库
- Ant Design Charts图表库
- Axios HTTP客户端

### 后端
- Flask Web框架
- Pandas数据处理
- SQLite数据库
- Jieba分词
- Flask-CORS跨域支持

## 安装与运行

### 后端

1. 安装依赖:
```bash
pip install -r requirements.txt
```

2. 启动后端服务:
```bash
cd backend
python -m flask run
```

后端服务将在 http://localhost:5000 运行。

### 前端

1. 安装依赖:
```bash
cd frontend
npm install
```

2. 启动开发服务器:
```bash
npm start
```

前端应用将在 http://localhost:3000 运行。

## 数据处理

### 环境要求与安装
```bash
pip install pandas openpyxl tqdm colorama
```

### 输入数据格式要求

#### 发帖列表数据 (bbs_post_list_YYYYMMDD.xlsx)
必须包含以下字段：
- **url**: 帖子URL，作为唯一标识
- **title**: 帖子标题
- **author**: 作者名称
- **post_time_str**: 发帖时间字符串，格式为"YYYY-MM-DD HH:MM:SS"
- **scraping_time_str**: 爬取时间字符串，格式为"YYYY-MM-DD HH:MM:SS"

#### 更新列表数据 (bbs_update_list_YYYYMMDD.xlsx)
必须包含以下字段：
- **url**: 帖子URL，作为唯一标识
- **title**: 帖子标题
- **author**: 作者名称
- **list_time_str**: 列表时间字符串，格式为"YYYY-MM-DD HH:MM:SS"
- **scraping_time_str**: 爬取时间字符串，格式为"YYYY-MM-DD HH:MM:SS"
- **read_count**: 阅读数量
- **reply_count**: 回复数量
- **last_reply_time_str**: 最后回复时间字符串，格式为"YYYY-MM-DD HH:MM:SS"

### 执行数据处理脚本

```bash
cd py
python analysis.py    # 运行数据分析脚本
```
